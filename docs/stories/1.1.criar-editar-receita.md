# Story 1.1: Criar/Editar Receita (campos essenciais)

## Status
Ready for Review

## Story
**Como** usuário do Cookzy,
**eu quero** criar e editar uma receita com campos essenciais (título, ingredientes, preparo),
**para** manter meu acervo organizado e pronto para uso no preparo.

## Acceptance Criteria
1. Permite criar uma nova receita com os campos: título, lista de ingredientes (nome, quantidade, unidade, observações) e passos de preparo.
2. Validações: título é obrigatório; feedback de erro visível e acessível.
3. Ao salvar, a receita persiste localmente e permanece após encerrar/reabrir o app.
4. Após salvar, navega para o Detalhe da Receita; cancelar volta sem salvar.

## Tasks / Subtasks
- [x] Modelo e DAO de Receita em persistência local (Room/SQLite) (AC: 3)
  - [x] Entidade Receita + Ingrediente(s); migração inicial (AC: 3)
  - [x] DAO com operações básicas (insert/update/get) (AC: 3)
- [x] Tela Editor de Receita (criar/editar) com validações (AC: 1, 2)
  - [x] Formulário com título, ingredientes e passos (AC: 1)
  - [x] Validação de título obrigatório e mensagens de erro (AC: 2)
- [x] Navegação e fluxo salvar/cancelar (AC: 4)
  - [x] Ao salvar, persiste e navega para Detalhe (AC: 3, 4)
  - [x] Ao cancelar, descarta alterações e retorna (AC: 4)

## Dev Notes
- Persistência local: usar Room/SQLite conforme padrão Android.
- Referências de arquitetura de UI/estado: ver docs/front-end/03-arquitetura-componentes.md (ViewModels por tela e contratos Estado/Evento/Efeito).
- Telas relacionadas no PRD (Seção 4): Editor de receita (criar/editar) e navegação para Detalhe.

### Testing
- Cobrir DAO (insert/update/get) com testes locais de banco.
- Validar regras de formulário (título obrigatório) em testes de unidade do ViewModel.

## Change Log
| Date       | Version | Description                               | Author |
|------------|---------|-------------------------------------------|--------|
| 2025-10-20 | 0.2     | Implementação do CRUD local e telas de criação/detalhe | Dev    |
| 2025-10-20 | 0.1     | Rascunho inicial da história               | PM     |

## Dev Agent Record

### Agent Model Used
- GPT-5 (Codex)

### Debug Log References
- Nenhum

### Completion Notes List
- Persistência local criada com Room (entidades, DAO, migração 0→1 e repositório offline) para receitas com ingredientes e passos.
- Implementada tela de lista, editor e detalhe em Compose com ViewModels seguindo contrato State/Event/Effect, validação de título obrigatório e fluxo salvar/cancelar.
- Cobertura de testes unitários para DAO e ViewModel; `./gradlew test` falhou localmente por permissão em `~/.gradle` (sem execução), recomenda-se repetir.

### File List
- gradle/libs.versions.toml
- app/build.gradle.kts
- app/src/main/AndroidManifest.xml
- app/src/main/java/com/eliascoelho911/cookzy/CookzyApplication.kt
- app/src/main/java/com/eliascoelho911/cookzy/android/CookzyApp.kt
- app/src/main/java/com/eliascoelho911/cookzy/android/CookzyNavHost.kt
- app/src/main/java/com/eliascoelho911/cookzy/android/MainActivity.kt
- app/src/main/java/com/eliascoelho911/cookzy/data/local/database/CookzyDatabase.kt
- app/src/main/java/com/eliascoelho911/cookzy/data/repository/OfflineRecipeRepository.kt
- app/src/main/java/com/eliascoelho911/cookzy/feature/recipeeditor/RecipeEditorViewModel.kt
- app/src/main/java/com/eliascoelho911/cookzy/feature/recipeeditor/RecipeEditorScreen.kt
- app/src/main/java/com/eliascoelho911/cookzy/feature/recipedetail/RecipeDetailScreen.kt
- app/src/main/java/com/eliascoelho911/cookzy/feature/recipelist/RecipeListScreen.kt
- app/src/test/java/com/eliascoelho911/cookzy/data/local/dao/RecipeDaoTest.kt
- app/src/test/java/com/eliascoelho911/cookzy/feature/recipeeditor/RecipeEditorViewModelTest.kt

## QA Results
